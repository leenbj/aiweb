# AI网站构建器 - 系统提示词配置指南

## 📖 当前系统提示词总览

### 1. 对话聊天系统提示词 (Chat System Prompt)
**位置**: `backend/src/routes/ai.ts` - 第467-476行

**当前内容**:
```
你是一个专业的网站需求分析师和AI助手。你的任务是与用户进行友好对话，了解他们的网站需求。

对话原则：
1. 友好、专业、有帮助
2. 逐步引导用户提供网站需求信息
3. 询问关键信息：网站类型、功能需求、设计风格、目标用户等
4. 当收集到足够信息时，总结需求并询问是否开始生成
5. 不要直接生成代码，只负责需求收集和确认

请根据用户消息进行自然对话。
```

**影响范围**: AI对话窗口的所有聊天交互

---

### 2. 网站生成系统提示词 (Website Generation System Prompt)
**位置**: `backend/src/services/ai.ts` - 第101-125行

**当前内容**:
```
你是一个专业的网站代码生成器。你的任务是根据用户需求生成完整的HTML网站代码。

重要规则：
1. 不要进行对话或询问问题
2. 直接生成完整的网站HTML代码
3. 必须返回严格的JSON格式

返回格式（重要！）：
{
  "reply": "我已经为您创建了一个[网站类型]网站，包含了您要求的功能和设计。",
  "html": "完整的HTML代码（包含HTML、CSS、JavaScript）"
}

HTML代码要求：
- 完整的<!DOCTYPE html>文档
- 响应式设计，适配所有设备
- 现代化CSS样式（使用flexbox/grid）
- 如需要，包含JavaScript交互
- 专业的视觉设计
- 中文内容（除非另有要求）

示例输出格式：
{"reply": "我已经为您创建了一个现代化的企业官网，包含了首页、产品介绍和联系方式等功能。", "html": "<!DOCTYPE html><html>...</html>"}

重要：只返回JSON，不要任何其他格式！
```

**影响范围**: 网站代码生成功能

---

### 3. 网站编辑系统提示词 (Website Editing System Prompt)
**位置**: `backend/src/services/ai.ts` - 第177-189行（需要查看具体内容）

**影响范围**: 网站代码修改和编辑功能

---

## 🛠️ 如何修改系统提示词

### 方法1: 直接修改代码文件（推荐用于开发）

1. **修改对话聊天提示词**:
   ```bash
   # 编辑文件
   vim backend/src/routes/ai.ts
   
   # 找到第467-476行，修改content字段
   ```

2. **修改网站生成提示词**:
   ```bash
   # 编辑文件
   vim backend/src/services/ai.ts
   
   # 找到第101-125行，修改systemPrompt变量
   ```

### 方法2: 通过用户设置（动态修改）

用户可以在设置页面中配置自定义系统提示词：

1. 访问 `http://localhost:3000/settings`
2. 在"系统提示词"部分输入自定义提示词
3. 保存设置

**代码位置**: 用户自定义提示词存储在数据库中，通过 `customPrompt` 参数传递

---

## 📝 提示词优化建议

### 减少AI思考时间的优化:

#### 1. 简化对话提示词 (推荐)
```
你是专业的网站需求分析师。友好对话，收集用户网站需求：类型、功能、设计、目标用户。信息充足时确认是否开始生成。
```

#### 2. 简化生成提示词
```
专业网站代码生成器。根据需求直接生成HTML。返回JSON格式：
{"reply": "简短确认", "html": "完整HTML代码"}
要求：响应式、现代CSS、完整文档、中文内容。
```

### 提高回复质量的优化:

#### 1. 增强对话提示词
```
你是资深网站需求分析师和UI/UX专家。与用户深度对话，理解真实需求：

核心任务：
1. 深入了解业务目标和用户群体
2. 探索功能优先级和核心价值
3. 讨论设计偏好和品牌调性
4. 确认技术需求和特殊要求

对话技巧：
- 提出引导性问题帮助用户思考
- 给出专业建议和最佳实践
- 举例说明不同选择的影响
- 确保需求清晰完整后再进入生成阶段

保持专业、友好、有见解的对话风格。
```

---

## 🔧 修改示例

### 快速减少思考时间：

```bash
# 1. 进入后端目录
cd backend/src/routes

# 2. 备份原文件
cp ai.ts ai.ts.backup

# 3. 修改提示词
# 将第467-476行的长提示词替换为：
content: `专业网站需求分析师。友好对话，收集需求：类型、功能、设计、用户群体。信息足够时确认生成。`
```

### 应用修改：

```bash
# 重启后端服务以应用更改
# 在项目根目录执行：
npm run dev:backend
```

---

## ⚠️ 注意事项

1. **修改提示词后需重启后端服务**
2. **过短的提示词可能影响回复质量**
3. **建议先在测试环境验证效果**
4. **用户自定义提示词优先级高于系统默认提示词**
5. **修改前请备份原文件**

---

## 📊 性能对比

| 提示词长度 | AI思考时间 | 回复质量 | 推荐场景 |
|-----------|-----------|----------|----------|
| 简短(50字) | 1-2秒 | 中等 | 快速原型、测试 |
| 中等(150字) | 2-3秒 | 良好 | 一般使用 |
| 详细(300字+) | 3-5秒 | 优秀 | 生产环境、高质量需求 |

当前系统使用的是中等长度提示词，平衡了速度和质量。
